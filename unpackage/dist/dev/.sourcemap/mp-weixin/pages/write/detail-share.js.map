{"version":3,"sources":["uni-app:///main.js","webpack:///F:/其他项目/elephant-framework-mp/pages/write/detail-share.vue?8911","webpack:///F:/其他项目/elephant-framework-mp/pages/write/detail-share.vue?31e9","webpack:///F:/其他项目/elephant-framework-mp/pages/write/detail-share.vue?1081","webpack:///F:/其他项目/elephant-framework-mp/pages/write/detail-share.vue?204f","uni-app:///pages/write/detail-share.vue","webpack:///F:/其他项目/elephant-framework-mp/pages/write/detail-share.vue?71ba","webpack:///F:/其他项目/elephant-framework-mp/pages/write/detail-share.vue?6e28"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;;;AAGA;AACA,yG,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,oBAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyH;AACzH;AACgE;AACL;AACc;;;AAGzE;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,uFAAM;AACR,EAAE,gGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,2FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAsmB,CAAgB,goBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;ACQ1nB;AACA,MADA,kBACA;AACA;AACA,uBADA;AAEA,uBAFA;AAGA,wBAHA;AAIA;AACA,0BADA;AAEA,4BAFA;AAGA,eAHA;AAIA,qBAJA;AAKA,qBALA;AAMA,oBANA;AAOA,mBAPA;AAQA,iBARA;AASA,6DATA;AAUA,gCAVA;AAWA,gLAXA;AAYA,2IAZA,EAJA;;AAkBA,sBAlBA;AAmBA,uBAnBA;;AAqBA,GAvBA;AAwBA,QAxBA,wBAwBA;AACA;AACA;AACA;AACA;AACA,GA7BA;AA8BA,SA9BA,qBA8BA;AACA;AACA;AACA;AACA,KAHA;AAIA,GAnCA;AAoCA;AACA,2BADA,qCACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAJA;;AAMA;;AAEA;AACA;AACA;AACA,2BADA;AAEA,8BAFA;AAGA,mBAHA,mBAGA,GAHA,EAGA;AACA;AACA;AACA,mCADA;AAEA,8CAFA;AAGA,6BAHA;AAIA,aATA;AAUA,gBAVA,kBAUA;AACA;AACA,2BADA;AAEA,wCAFA;AAGA,iCAHA;AAIA,iCAJA;;AAMA,aAjBA;AAkBA,qCAlBA;AAmBA,eAnBA;AAoBA,SArBA,EAqBA,GArBA;AAsBA,OAvBA;AAwBA,KAlDA;AAmDA,sBAnDA,8BAmDA,GAnDA,EAmDA,IAnDA,EAmDA,CAnDA,EAmDA,CAnDA,EAmDA,QAnDA,EAmDA,UAnDA,EAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAnEA;AAoEA,aApEA,uBAoEA;AACA;AACA,mCADA;AAEA,eAFA,qBAEA;AACA;AACA,SAJA;AAKA,YALA,gBAKA,GALA,EAKA;AACA;AACA,SAPA;;AASA,KA9EA;AA+EA;AACA,0BAhFA,oCAgFA;AACA;AACA;AACA,eADA,mBACA,GADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA,2CADA;AAEA,mBAFA,qBAEA;AACA;AACA,aAJA;AAKA,gBALA,kBAKA;AACA;AACA,2BADA;AAEA,oCAFA;AAGA,iCAHA;AAIA,iCAJA;;AAMA,aAZA;;AAcA,SApBA;;AAsBA,KAxGA;AAyGA;AACA,cA1GA,wBA0GA;AACA;AACA;AACA;AACA,KA9GA,EApCA,E;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAipC,CAAgB,unCAAG,EAAC,C;;;;;;;;;;;ACArqC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/write/detail-share.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/write/detail-share.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./detail-share.vue?vue&type=template&id=63b7c368&\"\nvar renderjs\nimport script from \"./detail-share.vue?vue&type=script&lang=js&\"\nexport * from \"./detail-share.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detail-share.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/write/detail-share.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail-share.vue?vue&type=template&id=63b7c368&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail-share.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail-share.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"\">\r\n\t\t<canvas class=\"canvas\" canvas-id=\"canvas\" :style=\"{ height: canvasHeight + 'px' }\" />\r\n\t\t<image style=\"border: 1px solid #000;\" :src=\"tempFilePath\" mode=\"widthFix\"></image>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tshareType: 'save',\r\n\t\t\tdefaultImages: [],\r\n\t\t\ttempFilePath: null,\r\n\t\t\tdetailData: {\r\n\t\t\t\ttitle: '14天走出失恋阴影',\r\n\t\t\t\ttitleDes: '书写你的训练计划',\r\n\t\t\t\tid: 666,\r\n\t\t\t\ttime: '16:20',\r\n\t\t\t\tweekday: '周三',\r\n\t\t\t\tyear: '2022',\r\n\t\t\t\tmonth: '10',\r\n\t\t\t\tday: '08',\r\n\t\t\t\treply: '学而时习之不亦说乎？有朋自远方来不亦君子乎？学而时习之不亦说乎？有朋自远方来不亦君子乎？',\r\n\t\t\t\tcustomTitle: '伦敦的风光让我陶醉',\r\n\t\t\t\tcontent: '王守仁，汉族，幼名云，字伯安，号阳明，封新建伯，谥文成，人称王阳明。明代最著名的思想家、文学家、哲学家和军事家。王阳明不仅是宋明心学的集大成者，一生事功也是赫赫有名，故称之为“真三不朽”其学术思想在中国、日本、朝鲜半岛以及东南亚国家乃至全球都有重要而深远的影响，因此，王守仁和孔子、孟子、朱熹并称为孔、孟、朱、王。',\r\n\t\t\t\timages: Array(4).fill().map(() => 'https://alipic.lanhuapp.com/MasterSlicePNG3ed0cd524301292a6a85cff20d88d237.png'),\r\n\t\t\t},\r\n\t\t\tcanvasWidth: 350,\r\n\t\t\tcanvasHeight: 350,\r\n\t\t};\r\n\t},\r\n\tonLoad({ type, canvasWidth, canvasHeight, data }) {\r\n\t\tthis.shareType = type || 'save';\r\n\t\tthis.canvasWidth = canvasWidth || 350;\r\n\t\tthis.canvasHeight = canvasHeight || 350;\r\n\t\t// this.detailData = data ? JSON.parse(decodeURIComponent(data)) : null;\r\n\t},\r\n\tonReady() {\r\n\t\tPromise.all((this.detailData?.images || []).map(url => uni.downloadFile({ url }))).then((resArr) => {\r\n\t\t\tthis.defaultImages = resArr.flat(2).filter(d => d).map(({ tempFilePath }) => tempFilePath);\r\n\t\t\tthis.drawImageToTempFilePath();\r\n\t\t});\r\n\t},\r\n\tmethods: {\r\n\t\tdrawImageToTempFilePath() {\r\n\t\t\tconst _this = this;\r\n\t\t\tuni.showLoading({ title: '图片绘制中...', mask: true });\r\n\t\t\tconst ctx = uni.createCanvasContext('canvas');\r\n\t\t\t\r\n\t\t\tctx.font = '20px HarmonyOS Sans SC-Regular, HarmonyOS Sans SC';\r\n\t\t\tctx.setFillStyle('#333333');\r\n\t\t\tctx.fillText(this.detailData.customTitle || '主标题', 28, 49);\r\n\t\t\t\r\n\t\t\tctx.setFontSize(12);\r\n\t\t\tctx.setFillStyle('#ABB3BB');\r\n\t\t\tctx.fillText(this.detailData.time || '时间', 29, 75);\r\n\t\t\t\r\n\t\t\tctx.setFontSize(14);\r\n\t\t\tctx.setFillStyle('#333333');\r\n\t\t\tlet currentY = this.canvasTextAutoLine(ctx, this.detailData.content || '正文', 28, 103, this.canvasWidth - 56, 23);\r\n\t\t\t\r\n\t\t\tthis.defaultImages.forEach((image) => {\r\n\t\t\t\tconst imageHeight = 300;\r\n\t\t\t\tctx.drawImage(image, 28, currentY, this.canvasWidth - 56, imageHeight);\r\n\t\t\t\tcurrentY += (imageHeight + 4);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tctx.fill();\r\n\t\t\t\r\n\t\t\tctx.draw(true, () => {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.canvasToTempFilePath({\r\n\t\t\t\t\t\tfileType: 'png',\r\n\t\t\t\t\t\tcanvasId: 'canvas',\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t_this.tempFilePath = res.tempFilePath;\r\n\t\t\t\t\t\t\t_this[({\r\n\t\t\t\t\t\t\t\tshare: 'shareImage',\r\n\t\t\t\t\t\t\t\tsave: 'saveImageToPhotosAlbum',\r\n\t\t\t\t\t\t\t})[_this.shareType]]();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail() {\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\tcontent: '图片绘制失败，请稍后重试！',\r\n\t\t\t\t\t\t\t\tconfirmText: '好的',\r\n\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcomplete: uni.hideLoading,\r\n\t\t\t\t\t}, _this);\r\n\t\t\t\t}, 300);\r\n\t\t\t});\r\n\t\t},\r\n\t\tcanvasTextAutoLine(ctx, text, x, y, maxWidth, lineHeight) {\r\n\t\t\tlet lineWidth = 0;\r\n\t\t\tlet lastSubStrIndex = 0;\r\n\t\t\tfor (let i = 0; i < text.length; i++) {\r\n\t\t\t\tlineWidth += ctx.measureText(text[i]).width;\r\n\t\t\t\tif (lineWidth > maxWidth) {\r\n\t\t\t\t\tctx.fillText(text.substring(lastSubStrIndex, i), x, y);\r\n\t\t\t\t\ty += lineHeight;\r\n\t\t\t\t\tlineWidth = 0;\r\n\t\t\t\t\tlastSubStrIndex = i;\r\n\t\t\t\t}\r\n\t\t\t\tif (i === text.length - 1) {\r\n\t\t\t\t\tctx.fillText(text.substring(lastSubStrIndex, text.length), x, y);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn y + lineHeight;\r\n\t\t},\r\n\t\tsaveImage() {\r\n\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\tfilePath: this.tempFilePath,\r\n\t\t\t\tsuccess() {\r\n\t\t\t\t\tuni.showToast({ title: '已保存至相册' });\r\n\t\t\t\t},\r\n\t\t\t\tfail(err) {\r\n\t\t\t\t\tuni.showToast({ title: '图片保存失败', icon: 'none' });\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 保存到相册\r\n\t\tsaveImageToPhotosAlbum() {\r\n\t\t\tconst _this = this;\r\n\t\t\tuni.getSetting({\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tif (res.authSetting['scope.writePhotosAlbum']) {\r\n\t\t\t\t\t\t_this.saveImage();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.authorize({\r\n\t\t\t\t\t\tscope: 'scope.writePhotosAlbum',\r\n\t\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\t\t_this.saveImage();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail() {\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\tcontent: '未授权，保存失败！',\r\n\t\t\t\t\t\t\t\tconfirmText: '好的',\r\n\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 分享给朋友\r\n\t\tshareImage() {\r\n\t\t\tif (wx && wx.showShareImageMenu) {\r\n\t\t\t\twx.showShareImageMenu({ path: this.tempFilePath });\r\n\t\t\t}\r\n\t\t},\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.canvas {\r\n\t\twidth: 100vw;\r\n\t\tmin-height: 100vh;\r\n\t}\r\n</style>\r\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail-share.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail-share.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1668755701921\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}